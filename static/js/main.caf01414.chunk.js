(this["webpackJsonppiano-relish"]=this["webpackJsonppiano-relish"]||[]).push([[0],{28:function(e,a,t){e.exports=t.p+"static/media/logo.7360bcc0.svg"},37:function(e,a,t){e.exports=t(49)},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(12),c=t.n(i),l=(t(42),t(7)),r=t(27),s=t(14),d=t(22),y=t(30),h=t(84),m=t(76),f=t(77),u=t(79),K=t(80),w=t(51),p=t(78),N=t(85),b=t(83),k=t(28),g=t.n(k),v=(t(43),[{whiteKeyId:16,whiteKeyName:"C"},{whiteKeyId:18,whiteKeyName:"D",blackKeyId:17,blackKeyName:"D\u266d",blackKeyNameAlt:"C\u266f"},{whiteKeyId:20,whiteKeyName:"E",blackKeyId:19,blackKeyName:"E\u266d",blackKeyNameAlt:"D\u266f"},{whiteKeyId:21,whiteKeyName:"F"},{whiteKeyId:23,whiteKeyName:"G",blackKeyId:22,blackKeyName:"G\u266d",blackKeyNameAlt:"F\u266f"},{whiteKeyId:25,whiteKeyName:"A",blackKeyId:24,blackKeyName:"A\u266d",blackKeyNameAlt:"G\u266f"},{whiteKeyId:27,whiteKeyName:"B",blackKeyId:26,blackKeyName:"B\u266d",blackKeyNameAlt:"A\u266f"},{whiteKeyId:28,whiteKeyName:"C"},{whiteKeyId:30,whiteKeyName:"D",blackKeyId:29,blackKeyName:"D\u266d",blackKeyNameAlt:"C\u266f"},{whiteKeyId:32,whiteKeyName:"E",blackKeyId:31,blackKeyName:"E\u266d",blackKeyNameAlt:"D\u266f"},{whiteKeyId:33,whiteKeyName:"F"},{whiteKeyId:35,whiteKeyName:"G",blackKeyId:34,blackKeyName:"G\u266d",blackKeyNameAlt:"F\u266f"},{whiteKeyId:37,whiteKeyName:"A",blackKeyId:36,blackKeyName:"A\u266d",blackKeyNameAlt:"G\u266f"},{whiteKeyId:39,whiteKeyName:"B",blackKeyId:38,blackKeyName:"B\u266d",blackKeyNameAlt:"A\u266f"},{whiteKeyId:40,whiteKeyName:"C"},{whiteKeyId:42,whiteKeyName:"D",blackKeyId:41,blackKeyName:"D\u266d",blackKeyNameAlt:"C\u266f"},{whiteKeyId:44,whiteKeyName:"E",blackKeyId:43,blackKeyName:"E\u266d",blackKeyNameAlt:"D\u266f"},{whiteKeyId:45,whiteKeyName:"F"},{whiteKeyId:47,whiteKeyName:"G",blackKeyId:46,blackKeyName:"G\u266d",blackKeyNameAlt:"F\u266f"},{whiteKeyId:49,whiteKeyName:"A",blackKeyId:48,blackKeyName:"A\u266d",blackKeyNameAlt:"G\u266f"},{whiteKeyId:51,whiteKeyName:"B",blackKeyId:50,blackKeyName:"B\u266d",blackKeyNameAlt:"A\u266f"},{whiteKeyId:52,whiteKeyName:"C"},{whiteKeyId:54,whiteKeyName:"D",blackKeyId:53,blackKeyName:"D\u266d",blackKeyNameAlt:"C\u266f"},{whiteKeyId:56,whiteKeyName:"E",blackKeyId:55,blackKeyName:"E\u266d",blackKeyNameAlt:"D\u266f"},{whiteKeyId:57,whiteKeyName:"F"},{whiteKeyId:59,whiteKeyName:"G",blackKeyId:58,blackKeyName:"G\u266d",blackKeyNameAlt:"F\u266f"},{whiteKeyId:61,whiteKeyName:"A",blackKeyId:60,blackKeyName:"A\u266d",blackKeyNameAlt:"G\u266f"},{whiteKeyId:63,whiteKeyName:"B",blackKeyId:62,blackKeyName:"B\u266d",blackKeyNameAlt:"A\u266f"},{whiteKeyId:64,whiteKeyName:"C"}]),I=function(e){var a=v.map((function(a){return o.a.createElement("li",{key:a.whiteKeyId},o.a.createElement("div",{className:"anchor",onClick:function(){return e.onKeyPress(a.whiteKeyId)}},e.showNames&&a.whiteKeyName),a.blackKeyId&&o.a.createElement("span",{className:"blackkey",onClick:function(){return e.onKeyPress(a.blackKeyId)}},e.showNames&&o.a.createElement("span",null,a.blackKeyName),e.showNames&&o.a.createElement("span",null,a.blackKeyNameAlt)))}));return o.a.createElement("div",{id:"p-wrapper"},o.a.createElement("ul",{id:"piano"},a))},A=t(11),E=t(10),x=function(){function e(){Object(A.a)(this,e),this.maxNotes=32,this.vrvToolkit=void 0,this.spacingNotesXml=[],this.vrvToolkit=new verovio.toolkit;for(var a=0;a<this.maxNotes;a++)this.spacingNotesXml.push('<note xml:id="rest-hidden-'.concat(a.toString(),'" dur="4" oct="6" pname="c" stem.dir="up" />'))}return Object(E.a)(e,[{key:"renderNotation",value:function(e){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[],n=[],o=0;o<e.length;o++){var i=a?"<verse><syl>".concat(e[o].fullname.toUpperCase(),"</syl></verse>"):"",c='<note xml:id="'.concat(o,'" dur="4" oct="').concat(e[o].octave,'" pname="').concat(e[o].name,'" ').concat(e[o].accidental?'accid="'+e[o].accidental+'"':"",">").concat(i,"</note>"),l='<rest xml:id="rest-'.concat(o,'" dur="4" oct="').concat(e[o].octave,'" pname="').concat(e[o].name,'" ').concat(e[o].accidental?'accid="'+e[o].accidental+'"':"","></rest>");e[o].octave>3?(t.push(c),n.push(l)):(t.push(l),n.push(c))}var r='<?xml version="1.0" encoding="UTF-8"?>\n    <?xml-model href="http://music-encoding.org/schema/3.0.0/mei-all.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n    <?xml-model href="http://music-encoding.org/schema/3.0.0/mei-all.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n    <mei xmlns="http://www.music-encoding.org/ns/mei" meiversion="3.0.0">\n      <music>\n          <body>\n                <mdiv>\n                  <score>\n                      <scoreDef>\n                            <staffGrp symbol="brace" label="">\n                              <staffDef clef.shape="G" clef.line="2" n="1" lines="5" lyric.size="80%" />\n                              <staffDef clef.shape="F" clef.line="4" n="2" lines="5" lyric.size="80%" />\n                            </staffGrp>\n                      </scoreDef>\n                      <section>\n                            <measure>\n                              <staff n="1">\n                                  <layer n="1" xml:id="layer-treple">\n                                        '.concat(t.join(""),'\n                                  </layer>\n                                  <layer xml:id="layer-spacing" n="2">\n                                        ').concat(this.spacingNotesXml.join(""),'\n                                  </layer>\n                              </staff>\n                              <staff n="2">\n                                  <layer xml:id="layer-bass" n="1">\n                                        ').concat(n.join(""),"\n                                  </layer>\n                              </staff>\n                            </measure>\n                      </section>\n                  </score>\n                </mdiv>\n          </body>\n      </music>\n    </mei>"),s={pageWidth:1900,border:20,scale:60,adjustPageHeight:1},d=this.vrvToolkit.renderData(r,s);return d}}]),e}(),C=t(29),j=t.n(C),O=(t(44),new x),D=function(e){var a=O.renderNotation(e.notes,e.showNames);return Object(n.useEffect)((function(){j()("g.note").off().on("click",(function(){e.onNoteClick(this.id)}))})),o.a.createElement("div",{id:"notation",className:"container",dangerouslySetInnerHTML:{__html:a}})},B=function e(a,t){if(Object(A.a)(this,e),this.keyId=a,this.noteId=t,this.octave=void 0,this.name=void 0,this.accidental=void 0,this.fullname=void 0,a<16||a>64)throw new RangeError("Invalid keyId. The valid range of keyId is 16 to 64.");if(t.length<2||t.length>3)throw new RangeError("noteId is invalid");this.name=t[0].toLowerCase(),this.octave=parseInt(t[1]);var n="";3===t.length&&(this.accidental=t[2],"s"===this.accidental?n="\u266f":"f"===this.accidental&&(n="\u266d")),this.fullname=this.name.toUpperCase()+n},G=function(){function e(){var a=this;Object(A.a)(this,e),this.pianoKeyMap={},this.pianoNoteMap={},this.pianoKeyMap={16:["c2"],17:["c2s","d2f"],18:["d2"],19:["d2s","e2f"],20:["e2"],21:["f2"],22:["f2s","g2f"],23:["g2"],24:["g2s","a2f"],25:["a2"],26:["a2s","b2f"],27:["b2"],28:["c3"],29:["c3s","d3f"],30:["d3"],31:["d3s","e3f"],32:["e3"],33:["f3"],34:["f3s","g3f"],35:["g3"],36:["g3s","a3f"],37:["a3"],38:["a3s","b3f"],39:["b3"],40:["c4"],41:["c4s","d4f"],42:["d4"],43:["d4s","e4f"],44:["e4"],45:["f4"],46:["f4s","g4f"],47:["g4"],48:["g4s","a4f"],49:["a4"],50:["a4s","b4f"],51:["b4"],52:["c5"],53:["c5s","d5f"],54:["d5"],55:["d5s","e5f"],56:["e5"],57:["f5"],58:["f5s","g5f"],59:["g5"],60:["g5s","a5f"],61:["a5"],62:["a5s","b5f"],63:["b5"],64:["c6"]},Object.keys(this.pianoKeyMap).forEach((function(e){return a.pianoKeyMap[e].forEach((function(t){return a.pianoNoteMap[t]=e}))}))}return Object(E.a)(e,[{key:"getNote",value:function(e){if(this.pianoNoteMap.hasOwnProperty(e)){var a=parseInt(this.pianoNoteMap[e]);return new B(a,e)}throw new Error("Invalid noteId.")}},{key:"getNoteByKeyId",value:function(e){if(this.pianoKeyMap.hasOwnProperty(e)){var a=this.pianoKeyMap[e][0];return new B(e,a)}throw new Error("Invalid keyId. The valid range of keyId is 16 to 64.")}},{key:"getAlternateNote",value:function(e){if(!this.pianoNoteMap.hasOwnProperty(e))throw new Error("Invalid noteId");var a,t=parseInt(this.pianoNoteMap[e]),n=this.pianoKeyMap[t];return n.length>1&&(a=n[0]===e?new B(t,n[1]):new B(t,n[0])),a}},{key:"getAllNoteIds",value:function(){return Object.keys(this.pianoNoteMap)}},{key:"getAllNaturalNoteIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=[];return Object.keys(this.pianoNoteMap).forEach((function(n){if(2===n.length){var o=parseInt(n[1]);o>=e&&o<=a&&t.push(n)}})),t}}]),e}(),M=function(){function e(){Object(A.a)(this,e),this.context=void 0,this.buffers={},this.initialize()}return Object(E.a)(e,[{key:"initialize",value:function(){console.log("initializing audio and loading sounds");try{"undefined"!==typeof AudioContext?this.context=new AudioContext:"undefined"!==typeof window.webkitAudioContext&&(this.context=new window.webkitAudioContext),this.loadSounds()}catch(e){alert("Web Audio API is not supported in this browser")}}},{key:"playNote",value:function(e){if((e<16||e>64)&&new RangeError("Invalid keyId. The valid range of keyId is 16 to 64."),this.buffers.hasOwnProperty(e)){console.log("SoundService: playing key="+e);var a=this.context.createBufferSource();a.buffer=this.buffers[e],a.connect(this.context.destination),a.start(0)}else console.log("Audio not loaded for key="+e)}},{key:"loadSounds",value:function(){for(var e=16;e<65;e++){var a="/piano-relish"+"/sounds/".concat(e,".wav");this.loadBuffer(e.toString(),a)}}},{key:"loadBuffer",value:function(e,a){console.log("loadBuffer: name=".concat(e,", path=").concat(a));var t=new XMLHttpRequest;t.open("GET",a,!0),t.responseType="arraybuffer";var n=this.context,o=this.buffers;t.onload=function(){n.decodeAudioData(t.response,(function(t){t?(console.log("audio loaded for: ",e),o[e]=t):alert("error decoding file data: "+a)}),(function(e){console.error("decodeAudioData error",e)}))},t.onerror=function(){alert("BufferLoader: XHR error")},t.send()}}]),e}(),S=Object(y.a)((function(e){return Object(h.a)({grow:{flexGrow:1},notation:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},keyboard:{paddingTop:e.spacing(1),paddingBottom:e.spacing(3),textAlign:"center",color:e.palette.text.secondary}})})),T=new G,F=new M,P=function(){var e,a=S(),t=o.a.useState([]),n=Object(d.a)(t,2),i=n[0],c=n[1],y=o.a.useState({showNames:!1}),h=Object(d.a)(y,2),k=h[0],v=h[1],A=function(e){32===i.length?c([e]):c([].concat(Object(s.a)(i),[e]))};return o.a.createElement("div",{className:a.grow},o.a.createElement(m.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement("img",{src:g.a,alt:"Logo"}),o.a.createElement("div",{className:a.grow}),o.a.createElement(N.a,{control:o.a.createElement(b.a,{checked:k.showNames,onChange:(e="showNames",function(a){v(Object(r.a)({},k,Object(l.a)({},e,a.target.checked)))}),value:"showNames",color:"default"}),label:"Show Names"}),o.a.createElement(p.a,{color:"inherit",onClick:function(){c([])}},"Clear"))),o.a.createElement(u.a,{fixed:!0},o.a.createElement(K.a,{container:!0,spacing:3},o.a.createElement(K.a,{item:!0,xs:12},o.a.createElement(w.a,{className:a.notation,elevation:1},o.a.createElement(D,{notes:i,showNames:k.showNames,onNoteClick:function(e){console.log("Clicked note: "+i[e].fullname+", keyId: "+i[e].keyId+", noteId: "+i[e].noteId)}}))),o.a.createElement(K.a,{item:!0,xs:12},o.a.createElement(w.a,{className:a.keyboard},o.a.createElement(I,{showNames:k.showNames,onKeyPress:function(e){console.log(e);var a=T.getNoteByKeyId(e);F.playNote(e),A(a)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=t(82),L=t(81),R=t(21),X=t.n(R),H=t(32),W=t.n(H),U=t(33),q=Object(U.a)({palette:{primary:X.a,secondary:W.a,background:{default:X.a[50]}}});c.a.render(o.a.createElement(L.a,{theme:q},o.a.createElement(z.a,null),o.a.createElement(P,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.caf01414.chunk.js.map