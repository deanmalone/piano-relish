(this["webpackJsonppiano-relish"]=this["webpackJsonppiano-relish"]||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/logo.7360bcc0.svg"},30:function(e,t,n){e.exports=n(42)},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(22),r=n.n(i),c=(n(35),n(16)),s=n(28),l=n(24),d=n(66),h=n(60),f=n(61),u=n(62),y=n(63),p=n(44),m=n(23),g=n.n(m),w=n(10),v=n.n(w),I=(n(36),[{whiteKeyId:16},{whiteKeyId:18,blackKeyId:17},{whiteKeyId:20,blackKeyId:19},{whiteKeyId:21},{whiteKeyId:23,blackKeyId:22},{whiteKeyId:25,blackKeyId:24},{whiteKeyId:27,blackKeyId:26},{whiteKeyId:28},{whiteKeyId:30,blackKeyId:29},{whiteKeyId:32,blackKeyId:31},{whiteKeyId:33},{whiteKeyId:35,blackKeyId:34},{whiteKeyId:37,blackKeyId:36},{whiteKeyId:39,blackKeyId:38},{whiteKeyId:40},{whiteKeyId:42,blackKeyId:41},{whiteKeyId:44,blackKeyId:43},{whiteKeyId:45},{whiteKeyId:47,blackKeyId:46},{whiteKeyId:49,blackKeyId:48},{whiteKeyId:51,blackKeyId:50},{whiteKeyId:52},{whiteKeyId:54,blackKeyId:53},{whiteKeyId:56,blackKeyId:55},{whiteKeyId:57},{whiteKeyId:59,blackKeyId:58},{whiteKeyId:61,blackKeyId:60},{whiteKeyId:63,blackKeyId:62},{whiteKeyId:64}]),b=function(e){var t=I.map((function(t){return o.a.createElement("li",{key:t.whiteKeyId},o.a.createElement("div",{className:"anchor",onClick:function(){return e.onKeyPress(t.whiteKeyId)}}),t.blackKeyId&&o.a.createElement("span",{onClick:function(){return e.onKeyPress(t.blackKeyId)}}))}));return o.a.createElement("div",{id:"p-wrapper"},o.a.createElement("ul",{id:"piano"},t))},K=n(9),k=n(6),x=function(){function e(){Object(K.a)(this,e),this.maxNotes=32,this.vrvToolkit=void 0,this.spacingNotesXml=[],this.vrvToolkit=new verovio.toolkit;for(var t=0;t<this.maxNotes;t++)this.spacingNotesXml.push('<note xml:id="rest-hidden-'.concat(t.toString(),'" dur="4" oct="6" pname="c" stem.dir="up" />'))}return Object(k.a)(e,[{key:"renderNotation",value:function(e){for(var t=[],n=[],a=0;a<e.length;a++){var o='<note xml:id="'.concat(a,'" dur="4" oct="').concat(e[a].octave,'" pname="').concat(e[a].name,'" ').concat(e[a].accidental?'accid="'+e[a].accidental+'"':"","></note>"),i='<rest xml:id="rest-'.concat(a,'" dur="4" oct="').concat(e[a].octave,'" pname="').concat(e[a].name,'" ').concat(e[a].accidental?'accid="'+e[a].accidental+'"':"","></rest>");e[a].octave>3?(t.push(o),n.push(i)):(t.push(i),n.push(o))}var r='<?xml version="1.0" encoding="UTF-8"?>\n    <?xml-model href="http://music-encoding.org/schema/3.0.0/mei-all.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n    <?xml-model href="http://music-encoding.org/schema/3.0.0/mei-all.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n    <mei xmlns="http://www.music-encoding.org/ns/mei" meiversion="3.0.0">\n      <music>\n          <body>\n                <mdiv>\n                  <score>\n                      <scoreDef>\n                            <staffGrp symbol="brace" label="">\n                              <staffDef clef.shape="G" clef.line="2" n="1" lines="5" lyric.size="80%" />\n                              <staffDef clef.shape="F" clef.line="4" n="2" lines="5" lyric.size="80%" />\n                            </staffGrp>\n                      </scoreDef>\n                      <section>\n                            <measure>\n                              <staff n="1">\n                                  <layer n="1" xml:id="layer-treple">\n                                        '.concat(t.join(""),'\n                                  </layer>\n                                  <layer xml:id="layer-spacing" n="2">\n                                        ').concat(this.spacingNotesXml.join(""),'\n                                  </layer>\n                              </staff>\n                              <staff n="2">\n                                  <layer xml:id="layer-bass" n="1">\n                                        ').concat(n.join(""),"\n                                  </layer>\n                              </staff>\n                            </measure>\n                      </section>\n                  </score>\n                </mdiv>\n          </body>\n      </music>\n    </mei>");return this.vrvToolkit.renderData(r,{pageWidth:1900,border:20,scale:60,adjustPageHeight:1})}}]),e}(),E=(n(37),new x),N=function(e){var t=E.renderNotation(e.notes);return o.a.createElement("div",{id:"notation",className:"container",dangerouslySetInnerHTML:{__html:t}})},j=function e(t,n){if(Object(K.a)(this,e),this.keyId=t,this.noteId=n,this.octave=void 0,this.name=void 0,this.accidental=void 0,this.fullname=void 0,this.color=void 0,this.sender=void 0,t<16||t>64)throw new RangeError("Invalid keyId. The valid range of keyId is 16 to 64.");if(n.length<2||n.length>3)throw new RangeError("noteId is invalid");this.name=n[0].toLowerCase(),this.octave=parseInt(n[1]),this.color="";var a="";3===n.length&&(this.accidental=n[2],"s"===this.accidental?a="\u266f":"f"===this.accidental&&(a="\u266d")),this.fullname=this.name.toUpperCase()+a},O=function(){function e(){var t=this;Object(K.a)(this,e),this.pianoKeyMap={},this.pianoNoteMap={},this.pianoKeyMap={16:["c2"],17:["c2s","d2f"],18:["d2"],19:["d2s","e2f"],20:["e2"],21:["f2"],22:["f2s","g2f"],23:["g2"],24:["g2s","a2f"],25:["a2"],26:["a2s","b2f"],27:["b2"],28:["c3"],29:["c3s","d3f"],30:["d3"],31:["d3s","e3f"],32:["e3"],33:["f3"],34:["f3s","g3f"],35:["g3"],36:["g3s","a3f"],37:["a3"],38:["a3s","b3f"],39:["b3"],40:["c4"],41:["c4s","d4f"],42:["d4"],43:["d4s","e4f"],44:["e4"],45:["f4"],46:["f4s","g4f"],47:["g4"],48:["g4s","a4f"],49:["a4"],50:["a4s","b4f"],51:["b4"],52:["c5"],53:["c5s","d5f"],54:["d5"],55:["d5s","e5f"],56:["e5"],57:["f5"],58:["f5s","g5f"],59:["g5"],60:["g5s","a5f"],61:["a5"],62:["a5s","b5f"],63:["b5"],64:["c6"]},Object.keys(this.pianoKeyMap).forEach((function(e){return t.pianoKeyMap[e].forEach((function(n){return t.pianoNoteMap[n]=e}))}))}return Object(k.a)(e,[{key:"getNote",value:function(e){if(this.pianoNoteMap.hasOwnProperty(e)){var t=parseInt(this.pianoNoteMap[e]);return new j(t,e)}throw new Error("Invalid noteId.")}},{key:"getNoteByKeyId",value:function(e){if(this.pianoKeyMap.hasOwnProperty(e)){var t=this.pianoKeyMap[e][0];return new j(e,t)}throw new Error("Invalid keyId. The valid range of keyId is 16 to 64.")}},{key:"getAlternateNote",value:function(e){if(!this.pianoNoteMap.hasOwnProperty(e))throw new Error("Invalid noteId");var t,n=parseInt(this.pianoNoteMap[e]),a=this.pianoKeyMap[n];return a.length>1&&(t=a[0]===e?new j(n,a[1]):new j(n,a[0])),t}},{key:"getAllNoteIds",value:function(){return Object.keys(this.pianoNoteMap)}},{key:"getAllNaturalNoteIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=[];return Object.keys(this.pianoNoteMap).forEach((function(a){if(2===a.length){var o=parseInt(a[1]);o>=e&&o<=t&&n.push(a)}})),n}}]),e}(),M=function(){function e(){Object(K.a)(this,e),this.context=void 0,this.buffers={},this.initialize()}return Object(k.a)(e,[{key:"initialize",value:function(){console.log("initializing audio and loading sounds");try{"undefined"!==typeof AudioContext?this.context=new AudioContext:"undefined"!==typeof window.webkitAudioContext&&(this.context=new window.webkitAudioContext),this.loadSounds()}catch(e){alert("Web Audio API is not supported in this browser")}}},{key:"playNote",value:function(e){if((e<16||e>64)&&new RangeError("Invalid keyId. The valid range of keyId is 16 to 64."),this.buffers.hasOwnProperty(e)){console.log("SoundService: playing key="+e);var t=this.context.createBufferSource();t.buffer=this.buffers[e],t.connect(this.context.destination),t.start(0)}else console.log("Audio not loaded for key="+e)}},{key:"loadSounds",value:function(){for(var e=16;e<65;e++){var t="/piano-relish"+"/sounds/".concat(e,".wav");this.loadBuffer(e.toString(),t)}}},{key:"loadBuffer",value:function(e,t){console.log("loadBuffer: name=".concat(e,", path=").concat(t));var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer";var a=this.context,o=this.buffers;n.onload=function(){a.decodeAudioData(n.response,(function(n){n?(console.log("audio loaded for: ",e),o[e]=n):alert("error decoding file data: "+t)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()}}]),e}(),A=Object(l.a)((function(e){return Object(d.a)({grow:{flexGrow:1},notation:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},keyboard:{paddingTop:e.spacing(1),paddingBottom:e.spacing(3),textAlign:"center",color:e.palette.text.secondary,backgroundColor:v.a[50]}})})),T=new O,B=new M,S=function(){var e=A(),t=o.a.useState([]),n=Object(s.a)(t,2),a=n[0],i=n[1],r=function(e){32===a.length?i([e]):i([].concat(Object(c.a)(a),[e]))};return o.a.createElement("div",{className:e.grow},o.a.createElement(h.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement("img",{src:g.a,alt:"Logo"}),o.a.createElement("div",{className:e.grow}))),o.a.createElement(u.a,{fixed:!0},o.a.createElement(y.a,{container:!0,spacing:3},o.a.createElement(y.a,{item:!0,xs:12},o.a.createElement(p.a,{className:e.notation,elevation:1},o.a.createElement(N,{notes:a}))),o.a.createElement(y.a,{item:!0,xs:12},o.a.createElement(p.a,{className:e.keyboard},o.a.createElement(b,{highlightedKeyId:0,onKeyPress:function(e){console.log(e);var t=T.getNoteByKeyId(e);B.playNote(e),r(t)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(65),P=n(64),D=n(26),z=n.n(D),G=n(27),L=Object(G.a)({palette:{primary:{main:v.a[500]},secondary:{main:v.a[300]},error:{main:z.a.A400},background:{default:v.a[100]}}});r.a.render(o.a.createElement(P.a,{theme:L},o.a.createElement(C.a,null),o.a.createElement(S,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ad3b3cc1.chunk.js.map